@page "/products/{id}"
@inject SharedData data
@inject IBlazorRepository repository
@rendermode InteractiveServer
@using Blazor_Laboration.Entities
@using Blazor_Laboration.Interfaces
@using Blazor_Laboration.Services
@using System.Text.Json

<h3>Products</h3>
<div>
	<img src="@Product.ImageUrl" class="rounded float-end" style="max-width:50%" alt="@Product.Name">
</div>
<table class="table table-hover table-borderless" style="max-width:50%">
	<thead class="h4">@Product.Name</thead>
	<tbody>
		<tr>
			<td>Product Id:</td>
			<td>@Product.Id</td>
		</tr>
		<tr>
			<td>Price:</td>
			<td>@Product.Price</td>
		</tr>
		<tr>
			<td>Description:</td>
			<td>@Product.Description</td>
		</tr>
	</tbody>
</table>

@code {

	[Parameter]
	public string Id { get; set; }

	private Product Product = new();

	public async Task GetProductAsync()
	{
		var id = int.Parse(Id);
		Product = await repository.GetEntityAsync<Product>(p => p.Id == id);
	}

	protected async override Task OnInitializedAsync()
	{
		await GetProductAsync();
	}
}
